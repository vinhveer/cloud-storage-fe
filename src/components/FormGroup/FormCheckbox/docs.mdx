import React from 'react'
import FormCheckbox, { useFormCheckbox } from '@/components/FormGroup/FormCheckbox/FormCheckbox'
import { Button } from '@/components/Button/Button'

# FormCheckbox

Ô chọn (checkbox) với nhãn, bắt buộc, lỗi và trợ giúp.

## Mục đích & trường hợp xử lý

- Bật/tắt tùy chọn trong form, hỗ trợ a11y và trạng thái lỗi.

## Props

| Tên | Kiểu | Mặc định | Mô tả |
| --- | --- | --- | --- |
| label | `string` | - | Nhãn hiển thị cạnh checkbox |
| required | `boolean` | `false` | Bắt buộc; thêm dấu `*` và thuộc tính `required` |
| error | `string \| null` | - | Thông báo lỗi dưới trường |
| help | `string \| null` | - | Gợi ý/hướng dẫn dưới trường |
| className | `string` | - | Bổ sung class Tailwind |
| ...rest | `Omit<React.InputHTMLAttributes<HTMLInputElement>, 'type'>` | - | Thuộc tính input gốc (trừ `type`) |

### Hook `useFormCheckbox`

Trả về `{ inputId, helpId, errorId, inputClasses, ariaDescribedBy, validateRequired }` để tái sử dụng/validate.

## Cách dùng
```tsx
<FormCheckbox label="Tôi đồng ý" required />
```

### Demos

```tsx
import FormCheckbox from '@/components/FormGroup/FormCheckbox/FormCheckbox'
```

#### Cơ bản

```tsx
<>
  <FormCheckbox label="Tôi đồng ý với điều khoản" />
  <FormCheckbox label="Nhận email khuyến mãi" />
  <FormCheckbox label="Bắt buộc" required />
</>
```

<div className="grid gap-6 mt-2">
  <FormCheckbox label="Tôi đồng ý với điều khoản" />
  <FormCheckbox label="Nhận email khuyến mãi" />
  <FormCheckbox label="Bắt buộc" required />
</div>

#### Trạng thái

```tsx
<>
  <FormCheckbox label="Có lỗi" error="Bạn phải đồng ý" />
  <FormCheckbox label="Có trợ giúp" help="Bạn có thể thay đổi cài đặt sau." />
  <FormCheckbox label="Disabled" disabled />
</>
```

<div className="grid gap-6 mt-2">
  <FormCheckbox label="Có lỗi" error="Bạn phải đồng ý" />
  <FormCheckbox label="Có trợ giúp" help="Bạn có thể thay đổi cài đặt sau." />
  <FormCheckbox label="Disabled" disabled />
</div>

#### Controlled

```tsx
{(() => {
  const [checked, setChecked] = React.useState(false)
  return (
    <FormCheckbox label={checked ? 'Đã bật' : 'Đã tắt'} checked={checked} onChange={(e) => setChecked(e.target.checked)} help="Ví dụ controlled với state" />
  )
})()}
```

{(() => {
  const [checked, setChecked] = React.useState(false)
  return (
    <div className="grid gap-6 mt-2">
      <FormCheckbox label={checked ? 'Đã bật' : 'Đã tắt'} checked={checked} onChange={(e) => setChecked(e.target.checked)} help="Ví dụ controlled với state" />
    </div>
  )
})()}

#### Form submit với validate required

```tsx
{(() => {
  const [error, setError] = React.useState(null)
  const [checked, setChecked] = React.useState(false)
  const { validateRequired } = useFormCheckbox({ required: true })
  const onSubmit = (e) => {
    e.preventDefault()
    const msg = validateRequired(checked, 'Bạn phải đồng ý điều khoản trước khi gửi.')
    setError(msg)
    if (!msg) alert('Submitted!')
  }
  return (
    <form onSubmit={onSubmit} className="space-y-4">
      <FormCheckbox label="Tôi đồng ý với điều khoản" required error={error} checked={checked} onChange={(e) => setChecked(e.target.checked)} />
      <div className="pt-2"><Button type="submit" variant="primary">Gửi</Button></div>
    </form>
  )
})()}
```

{(() => {
  const [error, setError] = React.useState(null)
  const [checked, setChecked] = React.useState(false)
  const { validateRequired } = useFormCheckbox({ required: true })
  const onSubmit = (e) => {
    e.preventDefault()
    const msg = validateRequired(checked, 'Bạn phải đồng ý điều khoản trước khi gửi.')
    setError(msg)
    if (!msg) alert('Submitted!')
  }
  return (
    <form onSubmit={onSubmit} className="space-y-4">
      <FormCheckbox label="Tôi đồng ý với điều khoản" required error={error} checked={checked} onChange={(e) => setChecked(e.target.checked)} />
      <div className="pt-2"><Button type="submit" variant="primary">Gửi</Button></div>
    </form>
  )
})()}

## Lưu ý

- Khi có `error`, trường có `aria-invalid` và `aria-describedby` tới thông báo lỗi.
- `id` tự sinh; có thể truyền `id` để kiểm soát và gắn `htmlFor` của label.


